{
  "openapi": "3.0.3",
  "info": {
    "title": "VirtualMoneySystem API",
    "version": "1.0.1",
    "description": "REST API for wallet, auth, transactions and FX conversion"
  },
  "servers": [
    { "url": "http://localhost:8080" }
  ],
  "paths": {
    "/api/v1/health": {
      "get": {
        "summary": "Health check",
        "responses": {
          "200": {
            "description": "Service health",
            "content": {"application/json": {"schema": {"$ref": "#/components/schemas/Health"}}}
          }
        }
      }
    },
    "/api/v1/users/signup": {
      "post": {
        "summary": "Sign up user",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["username", "password"],
                "properties": {
                  "username": {"type": "string"},
                  "password": {"type": "string"},
                  "email": {"type": "string"}
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Signup result",
            "content": {"application/json": {"schema": {"$ref": "#/components/schemas/GenericResponse"}}}
          }
        }
      }
    },
    "/api/v1/auth/login": {
      "post": {
        "summary": "Login",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["username", "password"],
                "properties": {
                  "username": {"type": "string"},
                  "password": {"type": "string"}
                }
              }
            }
          }
        },
        "responses": {
          "200": {"description": "Login result"}
        }
      }
    },
    "/api/v1/wallets": {
      "post": {
        "summary": "Create wallet",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["currency"],
                "properties": {
                  "currency": {"type": "string", "enum": ["USD", "EUR", "KES", "BTC"]}
                }
              }
            }
          }
        },
        "responses": {"200": {"description": "Wallet created"}}
      }
    },
    "/api/v1/wallets/{id}/deposit": {
      "post": {
        "summary": "Deposit funds",
        "parameters": [{"name": "id", "in": "path", "required": true, "schema": {"type": "string"}}],
        "requestBody": {"required": true, "content": {"application/json": {"schema": {"type": "object", "required": ["amount"], "properties": {"amount": {"type": "number"}}}}}},
        "responses": {"200": {"description": "Deposit result"}}
      }
    },
    "/api/v1/wallets/{id}/withdraw": {
      "post": {
        "summary": "Withdraw funds",
        "parameters": [{"name": "id", "in": "path", "required": true, "schema": {"type": "string"}}],
        "requestBody": {"required": true, "content": {"application/json": {"schema": {"type": "object", "required": ["amount"], "properties": {"amount": {"type": "number"}}}}}},
        "responses": {"200": {"description": "Withdraw result"}}
      }
    },
    "/api/v1/wallets/{id}/balance": {
      "get": {
        "summary": "Get wallet balance",
        "parameters": [{"name": "id", "in": "path", "required": true, "schema": {"type": "string"}}],
        "responses": {"200": {"description": "Balance"}}
      }
    },
    "/api/v1/wallets/{id}/transactions": {
      "get": {
        "summary": "Get wallet transactions",
        "parameters": [{"name": "id", "in": "path", "required": true, "schema": {"type": "string"}}],
        "responses": {"200": {"description": "Transactions"}}
      }
    },
    "/api/v1/transactions": {
      "post": {
        "summary": "Transfer funds",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["fromWallet", "toWallet", "amount"],
                "properties": {
                  "fromWallet": {"type": "string"},
                  "toWallet": {"type": "string"},
                  "amount": {"type": "number"}
                }
              }
            }
          }
        },
        "responses": {"200": {"description": "Transfer result"}}
      }
    },
    "/api/v1/convert": {
      "get": {
        "summary": "FX conversion",
        "parameters": [
          {"name": "from", "in": "query", "required": true, "schema": {"type": "string"}},
          {"name": "to", "in": "query", "required": true, "schema": {"type": "string"}},
          {"name": "amount", "in": "query", "required": true, "schema": {"type": "number"}}
        ],
        "responses": {"200": {"description": "Conversion"}}
      }
    }
  },
  "components": {
    "schemas": {
      "Health": {
        "type": "object",
        "properties": {
          "status": {"type": "string"},
          "version": {"type": "string"}
        }
      },
      "GenericResponse": {
        "type": "object",
        "properties": {
          "success": {"type": "boolean"},
          "error": {"type": "string"}
        }
      }
    }
  }
  "info": {"title": "VirtualMoneySystem API", "version": "1.0.0"},
  "paths": {}
}
